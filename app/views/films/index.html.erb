<%# The public list of all films in a festival -%>
<% content_for :title do %>Films at <%= @festival.name %><% end -%>
<% content_for :header do %>
  <%= render :partial => "festivals/header", :locals => { :festival => @festival, :hide_tabs => false } %>
<% end -%>

<% content_for "page_scripts" do %>
// Register for clicks on the film choices
jQuery(function() {
  jQuery("form.priority input").change(function(e) {
    <% if logged_in? -%>
    jQuery(this.form).ajaxSubmit({dataType: 'script'});
    <% else -%>
    alert("Log in to prioritize your films, or click the Sign Up link in the upper right corner to get started.");
    <% end -%>
    return false;
  });
});
<% end -%>

<h3>How much do you want to see each of these films?</h3>

<p>Here are all the films in the festival. Indicate your preference for seeing each film by clicking one of the little circles next to each film &mdash; the scheduling assistant will use these priorities to build a custom schedule for you.</p>

<p>The rightmost choice means "<%= ranking_hints[4] %>," 
and the leftmost means "<%= ranking_hints[0] %>." Each choice is saved as soon as you click, and you can come back later if you don't finish now, or if you want to change a choice. 
<% if logged_in? %>
You can reset all your priorities and start over
by clicking <%= link_to "here",
                      poly_reset_rankings_festival_url(@festival),
                      :method => :post,
                      :confirm => "Are you sure you want to throw away all your priority settings?" %>.
<% end %>
</p>

<table class="filmlist">
  <tr><td id="guide">Choose priority:<br/>(lower ... higher)</td><td>&nbsp;</td></tr>
<%= render :partial => "film", :collection => @films.sort_by(&:sort_name), :locals => { :picks => @picks, :show_press => @show_press } %>
</table>
